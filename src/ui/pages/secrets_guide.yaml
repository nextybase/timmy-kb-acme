secrets:
  SERVICE_ACCOUNT_FILE:
    required: true
    description: "Percorso al JSON del Service Account Google Drive."
    howto: |
      1. Vai su https://console.cloud.google.com/ con l'account che gestisce lo Shared Drive.
      2. Menu: IAM → Service Accounts.
      3. Crea (o seleziona) un Service Account dedicato a Timmy KB.
      4. Tab "Keys" → Add key → Create new key → tipo JSON.
      5. Scarica il file JSON in una cartella NON versionata (es. secrets/service_account.json).
      6. Imposta SERVICE_ACCOUNT_FILE nel tuo `.env` con il path assoluto o relativo, ad es.:
         SERVICE_ACCOUNT_FILE=secrets/service_account.json

  DRIVE_ID:
    required: true
    description: "ID dello Shared Drive dove risiedono i contenuti del cliente."
    howto: |
      1. Apri Google Drive e vai su "Drive condivisi".
      2. Clicca sullo Shared Drive che vuoi usare per il cliente.
      3. Copia l'ID dalla barra degli indirizzi:
         - URL tipico: https://drive.google.com/drive/folders/<ID> oppure /drives/<ID>.
         - L'ID è la stringa lunga dopo `folders/` o `drives/`.
      4. Incolla il valore in `.env`:
         DRIVE_ID=<ID_copiato>

  DRIVE_PARENT_FOLDER_ID:
    required: false
    description: "Cartella padre opzionale per provisioning Drive."
    howto: |
      1. Solo se vuoi che Timmy lavori dentro una sottocartella specifica dello Shared Drive.
      2. Nel Drive condiviso, crea (o apri) la cartella padre desiderata (es. `Clienti/ACME`).
      3. Copia l'ID dalla barra degli indirizzi come per DRIVE_ID (stringa dopo `folders/`).
      4. Imposta nel `.env`:
         DRIVE_PARENT_FOLDER_ID=<ID_cartella_padre>
      5. Lascia vuoto se vuoi usare la root dello Shared Drive.

  OPENAI_API_KEY:
    required: false
    description: "API key OpenAI per Vision/Assistant."
    howto: |
      1. Vai su https://platform.openai.com/ (o console OpenAI usata dalla tua organizzazione).
      2. Sezione "API Keys" → "Create new secret key".
      3. Copia la chiave una sola volta (non sarà più mostrata).
      4. Incollala nel file `.env`:
         OPENAI_API_KEY=sk-...  # pragma: allowlist secret (esempio)
      5. NON committare mai la chiave nel repository.

  OBNEXT_ASSISTANT_ID:
    required: false
    description: "ID assistant principale (Vision)."
    howto: |
      1. Vai nella console OpenAI → sezione "Assistants".
      2. Crea un Assistant dedicato a NeXT/Timmy oppure selezionane uno esistente.
      3. Nella pagina di dettaglio dell'assistant copia l'ID (forma `asst_...`).
      4. Imposta nel `.env`:
         OBNEXT_ASSISTANT_ID=asst_...
      5. In `config/config.yaml` usa solo il riferimento `_env` (es. ai.vision.assistant_id_env: OBNEXT_ASSISTANT_ID).


  GOOGLE_CLIENT_ID:
    required: false
    description: "Client ID OAuth Google per login amministrazione."
    howto: |
      1. Vai su https://console.cloud.google.com/apis/credentials.
      2. Crea un nuovo "OAuth 2.0 Client ID" di tipo "Web application".
      3. Inserisci una "Authorized redirect URI" coerente con la tua installazione, ad es.:
         - Locale:  http://localhost:8501/admin
         - Deploy:  https://<tuo-dominio>/admin
      4. Dopo la creazione, copia il valore "Client ID".
      5. Imposta nel `.env`:
         GOOGLE_CLIENT_ID=your_client_id.apps.googleusercontent.com

  GOOGLE_CLIENT_SECRET:
    required: false
    description: "Client secret OAuth Google (mai committare)."
    howto: |
      1. Nella stessa pagina dell'OAuth Client ID, scarica o mostra il "Client secret".
      2. Copia il valore del secret.
      3. Imposta nel `.env`:
         GOOGLE_CLIENT_SECRET=your_client_secret
      4. Conserva il secret solo in ambienti sicuri (es. Secret Manager, variabili d'ambiente in CI).

  GOOGLE_REDIRECT_URI:
    required: false
    description: "Redirect URI registrata per l'OAuth."
    howto: |
      1. Usa esattamente lo stesso valore registrato nel Client OAuth Google.
      2. Per sviluppo locale tipicamente:
         GOOGLE_REDIRECT_URI=http://localhost:8501/admin
      3. In produzione:
         GOOGLE_REDIRECT_URI=https://<tuo-dominio>/admin
      4. Se i valori non coincidono, il login Google restituirà errori di redirect_uri_mismatch.

  ALLOWED_GOOGLE_DOMAIN:
    required: false
    description: "Dominio ammesso per l'accesso."
    howto: |
      1. Scegli il dominio aziendale autorizzato all'accesso (es. `example.com`).
      2. Imposta nel `.env`:
         ALLOWED_GOOGLE_DOMAIN=example.com
      3. Solo gli account Google con email @example.com potranno completare il login.
